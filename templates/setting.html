<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì„¤ì • í˜ì´ì§€</title>
</head>
<body>
  <h2>ğŸµ ì•ŒëŒ ìŒì•… ì„ íƒ</h2>
  <form id="alarmSettingsForm">
    <label for="musicSelect">ìŒì•… íŒŒì¼:</label>
    <select id="musicSelect" name="musicPath">
      <option value="">ë¡œë”© ì¤‘...</option>
    </select>
    <button type="submit">ì €ì¥</button>
  </form>

  <script>
    // ìŒì•… ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
    fetch("/list-music/")
      .then(res => res.json())
      .then(data => {
        const select = document.getElementById("musicSelect");
        select.innerHTML = ""; // ì´ˆê¸°í™”
        data.forEach(file => {
          const option = document.createElement("option");
          option.value = `/static/music/${file}`;
          option.textContent = file;
          select.appendChild(option);
        });
      });

    // í¼ ì €ì¥ ì‹œ ì²˜ë¦¬
    document.getElementById("alarmSettingsForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const selectedMusic = document.getElementById("musicSelect").value;
      localStorage.setItem("selectedMusic", selectedMusic); // ê°„ë‹¨í•˜ê²Œ ì €ì¥
      alert("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    });
  </script>
</body>
</html>
